(()=>{"use strict";var t=function(){function t(t,e,n){void 0===t&&(t=8),void 0===e&&(e=8),void 0===n&&(n=10),this.rows=t,this.cols=e,this.mines=n,this.gameOver=!1,this.firstClick=!0,this.board=this.generateEmptyBoard()}return t.prototype.generateEmptyBoard=function(){var t=this;return Array.from({length:this.rows},function(){return Array.from({length:t.cols},function(){return{isMine:!1,isRevealed:!1,isFlagged:!1,adjacentMines:0}})})},t.prototype.placeMines=function(t,e){for(var n=0,r=new Set,i=-1;i<=1;i++)for(var a=-1;a<=1;a++){var o=t+i,s=e+a;o>=0&&o<this.rows&&s>=0&&s<this.cols&&r.add("".concat(o,",").concat(s))}for(;n<this.mines;){var c=Math.floor(Math.random()*this.rows),u=Math.floor(Math.random()*this.cols);this.board[c][u].isMine||r.has("".concat(c,",").concat(u))||(this.board[c][u].isMine=!0,n++)}for(c=0;c<this.rows;c++)for(u=0;u<this.cols;u++)this.board[c][u].isMine||(this.board[c][u].adjacentMines=this.countAdjacentMines(this.board,c,u))},t.prototype.countAdjacentMines=function(t,e,n){for(var r=0,i=-1;i<=1;i++)for(var a=-1;a<=1;a++)if(0!==i||0!==a){var o=e+i,s=n+a;o>=0&&o<this.rows&&s>=0&&s<this.cols&&t[o][s].isMine&&r++}return r},t.prototype.reveal=function(t,e){if(!(this.gameOver||this.board[t][e].isRevealed||this.board[t][e].isFlagged)){if(this.firstClick){for(var n=!1;!n;)this.board=this.generateEmptyBoard(),this.placeMines(t,e),this.board[t][e].isMine||0!==this.board[t][e].adjacentMines||(n=!0);this.firstClick=!1}if(this.board[t][e].isRevealed=!0,this.board[t][e].isMine)this.gameOver=!0;else if(0===this.board[t][e].adjacentMines)for(var r=-1;r<=1;r++)for(var i=-1;i<=1;i++)if(0!==r||0!==i){var a=t+r,o=e+i;a>=0&&a<this.rows&&o>=0&&o<this.cols&&(this.board[a][o].isRevealed||this.reveal(a,o))}}},t.prototype.toggleFlag=function(t,e){this.gameOver||this.board[t][e].isRevealed||(this.board[t][e].isFlagged=!this.board[t][e].isFlagged)},t.prototype.isWin=function(){var t;if(!this.board)return!1;for(var e=0;e<this.rows;e++)for(var n=0;n<this.cols;n++){var r=null===(t=this.board[e])||void 0===t?void 0:t[n];if(!r)return!1;if(!r.isMine&&!r.isRevealed)return!1}return!0},t}(),e=function(){function e(e,n,r,i){void 0===n&&(n=8),void 0===r&&(r=8),void 0===i&&(i=10),this.game=new t(n,r,i);var a=document.getElementById(e);if(!a)throw new Error("Container not found");this.container=a,this.render()}return e.prototype.render=function(){var t=this;this.container.innerHTML="";var e=this.countFlags(),n=this.game.mines,r=document.createElement("div");r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.marginBottom="1em",r.innerHTML='<span style="font-size:1.2em;">🚩 '.concat(e," / 💣 ").concat(n,"</span>"),this.container.appendChild(r);var i=document.createElement("table");i.style.borderCollapse="collapse";for(var a=function(e){for(var n=document.createElement("tr"),r=function(r){var i=o.game.board[e][r],a=document.createElement("td");a.style.width="32px",a.style.height="32px",a.style.textAlign="center",a.style.border="1px solid #888",a.style.background=i.isRevealed?"#e0e0e0":"#b0b0b0",a.style.cursor=i.isRevealed?"default":"pointer",o.game.gameOver&&i.isMine?(a.style.background="#ffb3b3",i.isFlagged?(a.textContent="❌",a.style.color="red",a.style.fontWeight="bold"):a.textContent="💣"):i.isRevealed?i.isMine?(a.textContent="💣",a.style.background="#ffb3b3"):i.adjacentMines>0&&(a.textContent=String(i.adjacentMines),a.style.color="#333"):i.isFlagged&&(a.textContent="🚩"),a.oncontextmenu=function(n){n.preventDefault(),t.game.gameOver||(t.game.toggleFlag(e,r),t.render())},a.onclick=function(){t.game.gameOver||(t.game.reveal(e,r),t.render(),t.game.gameOver?setTimeout(function(){alert("Game Over!"),location.reload()},100):t.game.isWin()&&setTimeout(function(){alert("You Win!"),location.reload()},100))},n.appendChild(a)},a=0;a<o.game.cols;a++)r(a);i.appendChild(n)},o=this,s=0;s<this.game.rows;s++)a(s);this.container.appendChild(i)},e.prototype.countFlags=function(){for(var t=0,e=0;e<this.game.rows;e++)for(var n=0;n<this.game.cols;n++)this.game.board[e][n].isFlagged&&t++;return t},e}(),n=[{spanish:"gato",german:"Katze"},{spanish:"perro",german:"Hund"},{spanish:"casa",german:"Haus"},{spanish:"libro",german:"Buch"},{spanish:"sol",german:"Sonne"},{spanish:"agua",german:"Wasser"},{spanish:"árbol",german:"Baum"},{spanish:"mesa",german:"Tisch"},{spanish:"silla",german:"Stuhl"},{spanish:"ventana",german:"Fenster"},{spanish:"puerta",german:"Tür"},{spanish:"coche",german:"Auto"},{spanish:"camino",german:"Weg"},{spanish:"niño",german:"Kind"},{spanish:"mujer",german:"Frau"},{spanish:"hombre",german:"Mann"},{spanish:"ciudad",german:"Stadt"},{spanish:"comida",german:"Essen"},{spanish:"escuela",german:"Schule"},{spanish:"amigo",german:"Freund"},{spanish:"familia",german:"Familie"},{spanish:"trabajo",german:"Arbeit"},{spanish:"dinero",german:"Geld"},{spanish:"tiempo",german:"Zeit"},{spanish:"mano",german:"Hand"},{spanish:"ojo",german:"Auge"},{spanish:"cielo",german:"Himmel"},{spanish:"mar",german:"Meer"},{spanish:"montaña",german:"Berg"},{spanish:"flor",german:"Blume"},{spanish:"pájaro",german:"Vogel"},{spanish:"pez",german:"Fisch"},{spanish:"pan",german:"Brot"},{spanish:"leche",german:"Milch"},{spanish:"zapato",german:"Schuh"},{spanish:"camisa",german:"Hemd"},{spanish:"reloj",german:"Uhr"},{spanish:"luz",german:"Licht"},{spanish:"noche",german:"Nacht"}],r=function(){function t(){this.questions=[],this.currentIndex=0}return t.prototype.init=function(){return t=this,e=void 0,i=function(){var t=this;return function(t,e){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(e){return this.questions=n.map(function(e){var r=t.shuffle(n.filter(function(t){return t.german!==e.german})).slice(0,3),i=t.shuffle(function(t,e,n){if(n||2===arguments.length)for(var r,i=0,a=e.length;i<a;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([e.german],r.map(function(t){return t.german}),!0));return{spanish:e.spanish,options:i,answer:e.german}}),this.currentIndex=0,this.shuffleQuestions(),[2]})},new((r=void 0)||(r=Promise))(function(n,a){function o(t){try{c(i.next(t))}catch(t){a(t)}}function s(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(o,s)}c((i=i.apply(t,e||[])).next())});var t,e,r,i},t.prototype.shuffle=function(t){return t.map(function(t){return{value:t,sort:Math.random()}}).sort(function(t,e){return t.sort-e.sort}).map(function(t){return t.value})},t.prototype.shuffleQuestions=function(){this.questions=this.shuffle(this.questions)},t.prototype.getQuestion=function(){var t;return this.currentIndex<this.questions.length&&null!==(t=this.questions[this.currentIndex])&&void 0!==t?t:null},t.prototype.nextQuestion=function(){var t;return this.currentIndex++,this.currentIndex<this.questions.length&&null!==(t=this.questions[this.currentIndex])&&void 0!==t?t:null},t.prototype.reset=function(){this.currentIndex=0,this.shuffleQuestions()},t}();new(function(){function t(){this.correctCount=0,this.minesweeperStarted=!1,this.vocabTest=new r,this.initAndStart()}return t.prototype.initAndStart=function(){return t=this,e=void 0,r=function(){return function(t,e){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,function(t){switch(t.label){case 0:return[4,this.vocabTest.init()];case 1:return t.sent(),this.renderQuestion(),[2]}})},new((n=void 0)||(n=Promise))(function(i,a){function o(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,s)}c((r=r.apply(t,e||[])).next())});var t,e,n,r},t.prototype.renderQuestion=function(){var t=this,e=this.vocabTest.getQuestion();if(e){var n=document.getElementById("app");n||((n=document.createElement("div")).id="app",document.body.appendChild(n)),n.innerHTML='\n\t\t\t\t\t<div style="display: flex; justify-content: center; align-items: center; min-height: 100vh;">\n\t\t\t\t\t\t<div id="quiz-section" style="'.concat(this.correctCount>=5?"display:none;":"",' max-width: 400px; width: 100%;">\n\t\t\t\t\t\t\t<h2>Was heißt <span style="color: #0074D9">').concat(e.spanish,'</span> auf Deutsch?</h2>\n\t\t\t\t\t\t\t<div id="options">\n\t\t\t\t\t\t\t\t').concat(e.options.map(function(t,e){return'<button data-opt="'.concat(t,'" style="margin: 0.5em;">').concat(t,"</button>")}).join(""),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id="result" style="margin-top:1em;"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id="minesweeper-section" style="').concat(this.correctCount>=5?"":"display:none;",' max-width: 500px; width: 100%; margin-left: 2em;">\n\t\t\t\t\t\t\t<h2>Good. Play a round</h2>\n\t\t\t\t\t\t\t<div id="minesweeper-container"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'),this.correctCount>=5&&this.showMinesweeper();var r=document.getElementById("options"),i=document.getElementById("result");if(r&&i){var a=!1;r.addEventListener("click",function(n){var r=n.target;if("BUTTON"===r.tagName&&!a){if(a=!0,r.getAttribute("data-opt")===e.answer){if(i.innerHTML='<span style="color:green">Richtig!</span>',t.correctCount++,5===t.correctCount&&!t.minesweeperStarted)return t.minesweeperStarted=!0,void setTimeout(function(){return t.renderQuestion()},800)}else i.innerHTML='<span style="color:red">Falsch! Richtig war: '.concat(e.answer,"</span>");var o=document.createElement("button");o.textContent="Weiter",o.style.marginLeft="1em",o.onclick=function(){t.vocabTest.nextQuestion(),t.renderQuestion()},i.appendChild(document.createElement("br")),i.appendChild(o)}})}}else this.renderEnd()},t.prototype.showMinesweeper=function(){var t=document.getElementById("minesweeper-section");t&&!t.dataset.started&&(new e("minesweeper-container",8,8,10),t.dataset.started="true")},t.prototype.renderEnd=function(){var t=document.getElementById("app");t||((t=document.createElement("div")).id="app",document.body.appendChild(t)),t.innerHTML="<h2>Test beendet!</h2>"},t}())})();
//# sourceMappingURL=main.js.map